# 人口推移分析ページ (PopulationTrend.vue)

## 概要
鳥取県の人口動態を時系列で詳細分析し、過去の推移から将来予測まで包括的に把握するページです。

## 主要機能

### 1. 概要カード
- **現在の総人口**: 現在の総人口と前年比
- **年間転入者数**: 年間転入者数と前年比
- **年間転出者数**: 年間転出者数と前年比
- **自然増減**: 出生・死亡による自然増減

### 2. タブ別分析機能

#### 総合推移タブ
- **総人口推移グラフ**: 過去10年の総人口推移（折れ線グラフ）
- **転入・転出推移グラフ**: 過去10年の転入・転出者数推移（折れ線グラフ）
- **自然増減推移グラフ**: 過去10年の自然増減推移（棒グラフ）

#### 年齢別分析タブ
- **年齢別人口推移グラフ**: 7つの年齢層別の過去10年推移（折れ線グラフ）
- **年齢別詳細テーブル**: 最新データの年齢別詳細情報
  - 総人口、転入者数、転出者数、純移動、前年比

#### 市区町村別分析タブ
- **市区町村別人口推移グラフ**: 6つの市区町村別の過去10年推移（折れ線グラフ）
- **市区町村別詳細テーブル**: 最新データの市区町村別詳細情報
  - 総人口、転入者数、転出者数、純移動、前年比

#### 季節性分析タブ
- **月別転入者数推移**: 12ヶ月の転入者数推移（棒グラフ）
- **月別転出者数推移**: 12ヶ月の転出者数推移（棒グラフ）
- **季節性分析テーブル**: 転入・転出が多い月の分析

#### 将来予測タブ
- **人口予測グラフ**: 今後10年の人口予測（3つのシナリオ）
- **予測根拠とシナリオ**: 3つの予測シナリオの説明
  - 楽観シナリオ: 住みやすさ向上施策が効果を発揮
  - 現状維持シナリオ: 現在の施策を継続
  - 悲観シナリオ: 施策が効果を発揮しない

## データ構造

### 現在人口データ
```javascript
currentPopulation: {
  total: 550000,        // 総人口
  change: -1500,        // 前年比変化
  inflow: 8500,         // 年間転入者数
  inflowChange: 200,    // 転入者数前年比
  outflow: 10000,       // 年間転出者数
  outflowChange: -300,  // 転出者数前年比
  naturalChange: -200   // 自然増減
}
```

### 年齢別データ
```javascript
ageGroupTableData: {
  '0-14歳': { 
    total: 85000,      // 総人口
    inflow: 1200,      // 転入者数
    outflow: 800,      // 転出者数
    netChange: 400,    // 純移動
    yearChange: 50     // 前年比
  }
  // 他の年齢層...
}
```

### 市区町村別データ
```javascript
municipalityTableData: {
  '鳥取市': { 
    total: 190000,     // 総人口
    inflow: 3200,      // 転入者数
    outflow: 2800,     // 転出者数
    netChange: 400,    // 純移動
    yearChange: 100    // 前年比
  }
  // 他の市区町村...
}
```

### 予測シナリオ
```javascript
forecastScenarios: {
  optimistic: 580000,   // 楽観シナリオ（2035年）
  current: 540000,      // 現状維持シナリオ（2035年）
  pessimistic: 500000   // 悲観シナリオ（2035年）
}
```

## グラフ機能

### Chart.js統合
- **8種類のグラフ**: 総人口、転入・転出、自然増減、年齢別、市区町村別、月別、予測
- **レスポンシブ対応**: 画面サイズに応じた自動調整
- **インタラクティブ**: ホバー時の詳細表示
- **カラフルな表示**: 各データセットに適切な色分け

### グラフの種類
- **折れ線グラフ**: 時系列データの推移表示
- **棒グラフ**: 月別データや自然増減の表示
- **エリアチャート**: 総人口推移の塗りつぶし表示

## 技術的特徴

- **Vue.js 3**: リアクティブなデータ管理
- **Chart.js**: 高機能なグラフ・チャートライブラリ
- **Tailwind CSS**: レスポンシブデザイン
- **動的チャート生成**: コンポーネントマウント時の自動生成
- **メモリ管理**: コンポーネント破棄時のチャートクリーンアップ

## 使用方法

### 1. タブ切り替え
- 5つのタブで異なる分析視点を提供
- 各タブで関連するグラフとテーブルを表示

### 2. グラフ操作
- ホバーで詳細データを確認
- 凡例クリックでデータセットの表示/非表示切り替え

### 3. データ確認
- テーブル形式で詳細な数値を確認
- 前年比や純移動などの計算値も表示

## 今後の拡張予定

1. **データ期間の拡張**: より長期間のデータ表示
2. **グラフのカスタマイズ**: ユーザーによる表示期間・項目の選択
3. **データエクスポート**: CSV・PDF形式でのデータ出力
4. **リアルタイム更新**: 最新データの自動取得・更新
5. **比較機能**: 他県との推移比較

## 注意事項

- グラフはコンポーネントマウント時に自動生成されます
- 大量のデータセットがある場合は、パフォーマンスに注意が必要です
- チャートの破棄処理を適切に行い、メモリリークを防いでいます
- データの更新時は、チャートの再描画が必要です

## データソース

- 総人口データ: 国勢調査、住民基本台帳
- 転入・転出データ: 住民基本台帳人口移動報告
- 自然増減データ: 人口動態統計
- 年齢別・市区町村別データ: 各自治体の統計資料
- 予測データ: 国立社会保障・人口問題研究所の推計
